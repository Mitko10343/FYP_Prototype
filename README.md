# FYP_Prototype
FYp Prototype

NOTE: I personally used JetBrains - WebStorm IDE, but you can also use the cmd. Just make sure you have node.js installed

-------------------------------------------------------RUNING THE APPLICATION------------------------------------------------------------------
1)Clone the repository into your directory
2)Navigate to the project directory
3)In the terminal of WebStorm (or comman prompt if you are navigated in the project directory) type 'nodemon run app.js'
4)The terminal should display the URL at which the application is running, but if you can't find it just go to http://127.0.0.1:3000/

----------------------------------------------------------------app.Js-------------------------------------------------------------------------
The file app.js was generated when I created the node.js project in WebStorm. It redirects HTTP requests to the corresponding pages
HTTP request which have a route like /users get handled by the users.js file in the routes folder. Users.js was also generated when 
I created the application.
HTTP all other http requests are handled by the file index.js in the routes folder. This file was completely modified by me and 
contains the majority of the key features in the prototype.

----------------------------------------------------------------index.Js-----------------------------------------------------------------------

The file index.js acts as a REST API. HTTP requests coming in from the client application get handled here depending on their specified route.

At the top of index.js I'm getting a references to all the modules I will be using using the require() function.

Each route fires a callback function which contains the request and response objects for HTTP

Route '/':
	The index route '/' basically renders a page called index.ejs which is just a html page which uses the 'Embedded Javascript Module' allowing
	me to inbed JS parameters straight into html from the response object
	
Route '/loginSpotify':
	The loginSpotify route redirects the user to the spotify authorisation page which the user must log into in order to grant the application
	permission to use his data. From the authorization page the app then redirects to the /success route.

Route '/success':
	The application redirects to this route through the '/loginSpotify' route. Upon success the the request object body it should carry an authentication 	
	code which was generated by the Spotify API when the user agreed to give persimissions to the app. The application now must exchange this code 
	once again with the spotifyAPI in exchange for an access token which the application can then use to get user data from Spotify.
	The '/success' route redirects to the Spotify API once more to exchange the code for an access token. Upon success the Spotify redirects back to the
	application again and now the application queries the spotify api to retrieve the authenticated users profile information.
	Finally the application redirects the user to the '/profile' route which display the users information.
	
Route '/profile':
	Displays a simple page with the authenticated user details.
	
Route '/getSongs':
	From the '/profile' page the user can get a list of the their playlists from spotify and their tracks. By clicking the 'Get Songs' link the user gets 
	redirected to this route and the application fetches the users playlists IDs and then for each playlists gets the tracks it contains.
	The app add each track to a JSON array of track objects and renders it to the 'listSongs.ejs' page.
	
Route '/register':
	Renders the register page.
	
Route '/registers':
	If a user registers a user from the register page, they get redirected to this route. The route creates a user using Firebase authentication and then
	retrieves the user ID.
	Once the app has the userID, it then creates a record in the Firestore database with the userId as key and adds all other information to the record.
	Finally the app renders the register page again.
	
Route '/login':
	If a user logs in from the login modal of the navigation bar they get redirected here. Using firebase Authentication the app verifies the user
	and upon succes renders the index page displaying the user's Display name as the heading of the page.
	
	

----------------------------------------------------------------Views Folder-----------------------------------------------------------------------
The Views folder contains all the html files being rendered by index.js, which have .ejs extenstion because they allow the embedding of javascript 
straight into the HTML The Views folder has a subfolder called Partial which contains partial views which are used by all of the other static files.


----------------------------------------------------------------Styles Folder-----------------------------------------------------------------------
Contains the static css files for the static files rendered by the application.


----------------------------------------------------------------Service Key-----------------------------------------------------------------------
The service key folder contains the serviceKey.json file which contains the private key for authentication with firebase databse.
It is used in index.js
	
